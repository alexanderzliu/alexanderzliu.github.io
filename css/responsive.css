/* ============================================
   RESPONSIVE - Mobile breakpoint at 600px
============================================ */

@media (max-width: 600px) {
    /* ----------------------------------------
       WINDOWS - Auto-fill screen on mobile
    ---------------------------------------- */
    .window.is-open,
    .window.is-zoomed {
        position: fixed !important;
        left: 0 !important;
        top: 36px !important;
        width: 100vw !important;
        height: calc(100vh - 36px) !important;
        max-width: none !important;
        min-width: auto !important;
        border-left: none !important;
        border-right: none !important;
        box-shadow: none !important;
    }

    .window {
        min-width: unset !important;
        max-width: unset !important;
    }

    /* Hide resize handle on mobile (windows are fullscreen) */
    .window__resize {
        display: none;
    }

    /* Larger close/zoom buttons for touch */
    .window__close,
    .window__zoom {
        width: 24px;
        height: 20px;
    }

    /* ----------------------------------------
       FOLDER ICONS - 2 columns on mobile
    ---------------------------------------- */
    .folder-icons {
        grid-template-columns: repeat(2, 1fr) !important;
        column-gap: 8px;
        row-gap: 24px;
        padding: 16px;
    }

    .folder-icon {
        padding: 8px;
    }

    .folder-icon__image {
        width: 48px;
        height: 48px;
    }

    .folder-icon__label {
        font-size: 12px;
        max-width: 100px;
        padding: 4px 6px;
    }

    /* ----------------------------------------
       DESKTOP ICONS - Adjust for mobile
    ---------------------------------------- */
    .desktop-icons {
        right: 4px;
        gap: 2px;
    }

    .desktop-icon {
        width: 64px;
    }

    .desktop-icon__image {
        width: 48px;
        height: 48px;
    }

    .desktop-icon__label {
        font-size: 10px;
    }

    /* ----------------------------------------
       MENU BAR - Touch-friendly sizing
    ---------------------------------------- */
    .menu-bar__item {
        padding: 2px 8px;
    }

    .menu-dropdown__item {
        min-height: 44px;
        padding: 12px 16px;
        display: flex;
        align-items: center;
    }

    /* ----------------------------------------
       CONTROL STRIP - Keep bottom-left
    ---------------------------------------- */
    .control-strip {
        bottom: 8px;
        left: 8px;
        z-index: 10001;
    }

    .control-strip__btn {
        width: 40px;
        height: 40px;
    }

    /* ----------------------------------------
       MUSIC WIDGET - Stack above control strip
    ---------------------------------------- */
    .music-widget.is-open {
        left: 8px !important;
        bottom: 56px !important;
        top: auto !important;
        width: calc(100vw - 16px) !important;
        max-width: 280px !important;
    }
}

/* ============================================
   LONG-PRESS VISUAL FEEDBACK
============================================ */
.folder-icon.is-long-pressing,
.desktop-icon.is-long-pressing {
    transform: scale(1.1);
    opacity: 0.8;
    transition: transform 0.15s ease-out, opacity 0.15s ease-out;
}

/* ============================================
   TOUCH-ACTION HINTS
   Prevents browser default behaviors during drag
============================================ */
.window__titlebar,
.window__resize {
    touch-action: none;
}

/* Icons allow manipulation (tap) but not pan/zoom */
.folder-icon,
.desktop-icon {
    touch-action: manipulation;
}

/* Prevent text selection during drag */
.is-dragging,
.is-dragging *,
.is-long-pressing,
.is-long-pressing * {
    user-select: none !important;
    -webkit-user-select: none !important;
}

/* ============================================
   DISABLE HOVER EFFECTS ON TOUCH DEVICES
============================================ */
@media (hover: none) {
    .folder-icon:hover .folder-icon__image,
    .desktop-icon:hover .desktop-icon__image {
        transform: none;
    }

    .folder-icon:hover .folder-icon__label,
    .desktop-icon:hover .desktop-icon__label {
        background: transparent;
        color: var(--pure-black);
    }

    .menu-bar__item:hover {
        background: var(--pure-white);
        color: var(--pure-black);
    }

    /* Keep is-open state for menus */
    .menu-bar__item.is-open {
        background: var(--pure-black);
        color: var(--pure-white);
    }
}
