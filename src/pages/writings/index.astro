---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("writings", ({ data }) => {
  return import.meta.env.MODE === "development" ? true : !data.draft;
});
posts.sort((a, b) => +new Date(b.data.date) - +new Date(a.data.date));
---
<Base title="Writings â€” Alexander Liu" description="Writing, notes, and projects">
  <header class="header">
    <h1 class="name">Writings</h1>
    <p class="tagline">Writing, notes, and projects</p>
  </header>
  <nav class="links" aria-label="Subnav">
    <a class="link" href="/" transition:animate>Home</a>
  </nav>
  <ul class="post-list" role="list">
    {posts.map((post) => (
      <li class="post-item">
        <a class="link" href={`/writings/${post.slug}/`} transition:animate>{post.data.title}</a>
        <span class="post-date">{new Date(post.data.date).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' })}</span>
      </li>
    ))}
  </ul>
</Base>
